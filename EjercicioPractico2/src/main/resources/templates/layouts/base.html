<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle != null} ? ${pageTitle} : 'Plataforma AcadÃ©mica'"></title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="container">
            <a th:href="@{/home}">ğŸ  Inicio</a>
            <a sec:authorize="hasRole('ADMIN')" th:href="@{/usuarios}">ğŸ‘¥ Usuarios</a>
            <a sec:authorize="hasRole('ADMIN')" th:href="@{/roles}">ğŸ­ Roles</a>
            <a sec:authorize="hasAnyRole('ADMIN', 'PROFESOR')" th:href="@{/reportes}">ğŸ“Š Reportes</a>
            <a sec:authorize="hasAnyRole('ADMIN', 'PROFESOR')" th:href="@{/consultas}">ğŸ” Consultas</a>
            <a sec:authorize="isAuthenticated()" th:href="@{/perfil}">ğŸ‘¤ Mi Perfil</a>
            
            <span style="float: right;">
                <span sec:authorize="isAuthenticated()" style="margin-right: 15px;">
                    ğŸ‘‹ <strong sec:authentication="name"></strong>
                </span>
                <form sec:authorize="isAuthenticated()" th:action="@{/logout}" method="post" style="display: inline;">
                    <button type="submit" class="btn btn-danger">ğŸšª Cerrar SesiÃ³n</button>
                </form>
            </span>
        </div>
    </nav>

    <!-- Header Principal -->
    <header class="main-header" th:if="${showHeader != false}">
        <div class="container">
            <h1 th:text="${pageTitle != null} ? ${pageTitle} : 'Plataforma AcadÃ©mica'"></h1>
            <p th:if="${pageSubtitle}" th:text="${pageSubtitle}"></p>
        </div>
    </header>

    <!-- Contenido Principal -->
    <main class="container">
        <!-- Mensajes Flash -->
        <div th:if="${mensaje}" class="alert alert-success fade-in">
            <strong>âœ“</strong> <span th:text="${mensaje}"></span>
        </div>
        
        <div th:if="${error}" class="alert alert-danger fade-in">
            <strong>âœ—</strong> <span th:text="${error}"></span>
        </div>
        
        <!-- Contenido especÃ­fico de cada pÃ¡gina -->
        <div layout:fragment="content">
            <!-- AquÃ­ va el contenido especÃ­fico de cada pÃ¡gina -->
        </div>
    </main>

    <!-- Footer -->
    <footer style="text-align: center; padding: 20px; margin-top: 40px; color: #7f8c8d;">
        <p>Â© 2023 Plataforma AcadÃ©mica - GestiÃ³n de Usuarios y Roles</p>
        <p>Sistema desarrollado para el ejercicio prÃ¡ctico de Desarrollo de Aplicaciones Web</p>
    </footer>
</body>
</html>